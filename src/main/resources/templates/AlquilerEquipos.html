<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">

<head lang="en">
    <meta charset="UTF-8"/>
    <title>Nuevo Alquiler</title>


    <script src="/webjars/jquery/3.1.0/jquery.min.js"></script>
    <script src="/webjars/bootstrap/3.3.7-1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.maskedinput/1.4.1/jquery.maskedinput.js" type="text/javascript"></script>

    <script type="text/javascript" th:src="@{bootstrap-select.min.js}"></script>
    <link rel="stylesheet" type="text/css" th:href="@{bootstrap-select.min.css}"/>


    <link rel="stylesheet" href="/webjars/bootstrap/3.3.7-1/css/bootstrap.min.css" />
</head>
<body>
<div th:include="fragments/NavBar :: navbar"></div>

<div class="panel panel-default">
    <div class="panel-heading">Registro de Alquiler</div>
    <div class="panel-body">

        <form class="form-horizontal" action="#" th:action="@{/RegistroAlquiler}" th:object="${alquiler}"  method="post" enctype="multipart/form-data">

            <div class="form-group">
                <label class="control-label col-sm-2">Cliente:</label>
                <div class="col-sm-10">
                    <select class="selectpicker form-control" data-live-search="true" name="clienteID">
                        <option>Seleccione</option>
                        <option th:each="cliente : ${clientes}" th:value="${cliente.id}"  th:text="${cliente.nombre}" ></option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-2" >Fecha de Alquiler:</label>
                <div class="col-sm-10">
                    <input class='form-control' name="date" id="date" />
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-2" >Fecha de Entrega:</label>
                <div class="col-sm-10">
                    <input class='form-control' name="date" id="dat" />
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-2">Equipos:</label>
                <div class="col-sm-10">
                    <select multiple="multiple" class="form-control" id="equiposSelect" name="equiosID">
                        <option th:each="equipo : ${equipos}" th:value="${equipo.cantidad}"  th:text="${equipo.nombre}"></option>
                    </select>
                </div>
            </div>

            <a href="#" onclick="loadDevices()">Agregar</a>

            <table class="table" id="thetable">
                <thead>
                <tr>
                    <th>Nombre del Equipo</th>
                    <th>Cantidad</th>
                    <th>Fecha de entrega</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td></td>
                </tr>
                </tbody>
            </table>

            <button class="btn-success" type="submit">Guardar</button>
        </form>
    </div>

</div>
</body>

<script>
    /*<![CDATA[*/
    $( document ).ready(function() {
        jQuery(function ($) {
            $("#date").mask("99/99/9999", { placeholder: "dd/mm/yyyy" });
            $("#date2").mask("99/99/9999", { placeholder: "dd/mm/yyyy" });
        });
    });


    function loadDevices() {
        var x = document.getElementById("equiposSelect");

        var lista = [];
        var listaCant = [];
        for (var i = 0; i < x.options.length; i++) {
            if(x.options[i].selected){
                lista.push(x.options[i].text);
                listaCant.push(x.options[i].value);
            }
        }


        $('#thetable tr').not(':first').not(':last').remove();
        var html = '';
        for(i = 0; i < lista.length; i++) {

            html += '<tr><td>' + lista[i] + '</td><td>' + '<input type="number" id="maxValue" min="0"/>' + '</td></tr>';
            document.getElementById("maxValue").setAttribute("max", listaCant[i]);
        }
        $('#thetable tr').first().after(html);

    }
    /*]]>*/
</script>
</html>